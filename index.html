<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>LuminaWeight ® | Tirzepatide & Retatrutide UK</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
<style>
  body { font-family: 'Segoe UI', sans-serif; background: #f8f9fa; margin: 0; }
  .hero { background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%); color: white; padding: 130px 0; }
  .product-card { transition: all 0.3s; border: none; cursor: pointer; }
  .product-card:hover { transform: translateY(-12px); box-shadow: 0 25px 50px rgba(0,0,0,0.18); }
  .price { font-size: 2rem; font-weight: bold; color: #e91e63; }
  .stock { font-size: 0.95rem; }
  .out-of-stock { opacity: 0.6; pointer-events: none; }
  .cart-icon { cursor: pointer; font-size: 1.6rem; }
  .cart-sidebar { height: 100vh; width: 420px; position: fixed; top: 0; right: -420px; background: white; box-shadow: -8px 0 30px rgba(0,0,0,0.2); transition: 0.4s; z-index: 9999; overflow-y: auto; }
  .cart-sidebar.open { right: 0; }
  .overlay { display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.6); z-index: 9998; }
  .overlay.show { display: block; }
  .qty-btn { width: 38px; height: 38px; }
  .qty-input { width: 60px; text-align: center; }
  footer { background: #111; color: #ccc; }
</style>
</head>
<body>

<nav class="navbar navbar-expand-lg navbar-dark bg-dark sticky-top">
  <div class="container">
    <a class="navbar-brand fw-bold fs-3 d-flex align-items-center" href="#">
  <img "Lumina Logo Black.png" style="height:38px; margin-right:12px;">
  LuminaWeight
</a>
    <div class="ms-auto d-flex align-items-center text-white">
      <div class="position-relative me-4">
        <i class="fas fa-shopping-cart cart-icon" onclick="toggleCart()"></i>
        <span id="cart-count" class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger">0</span>
      </div>
    </div>
  </div>
</nav>
<div class="overlay" onclick="toggleCart()"></div>

<!-- Cart Sidebar -->
<div class="cart-sidebar" id="cart-sidebar">
  <div class="p-4 border-bottom bg-light d-flex justify-content-between">
    <h4 class="mb-0">Your Cart (<span id="cart-items-count">0</span>)</h4>
    <button class="btn-close" onclick="toggleCart()"></button>
  </div>
  <div id="cart-items" class="p-4" style="min-height: 60vh;">
    <p class="text-center text-muted">Your cart is empty</p>
  </div>
  <div class="p-4 border-top bg-light">
    <div class="d-flex justify-content-between fs-5 mb-3">
      <strong>Total:</strong>
      <strong id="cart-total">£0.00</strong>
    </div>
    <button class="btn btn-success w-100 btn-lg" onclick="goToCheckout()">Proceed to Checkout</button>
    <small class="text-muted d-block mt-2 text-center">Enter address → get bank details</small>
  </div>
</div>

<!-- Hero -->
<section class="hero text-center">
  <div class="container">
    <h1 class="display-3 fw-bold">LuminaWeight</h1>
    <p class="lead fs-3">Premium Tirzepatide & Retatrutide – Up to 30% Weight Loss</p>
    <a href="#products" class="btn btn-warning btn-lg mt-4 px-5">Shop Now</a>
  </div>
</section>

<!-- Product Modal -->
<div class="modal fade" id="productModal" tabindex="-1">
  <div class="modal-dialog modal-lg modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="modalTitle"></h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
      </div>
      <div class="modal-body text-center">
        <img id="modalImg" src="" class="img-fluid mb-4" style="max-height: 500px;">
        <h3 id="modalName"></h3>
        <p class="price fs-1" id="modalPrice"></p>
        <p class="stock text-success mb-3" id="modalStock"></p>
        <div class="d-flex justify-content-center align-items-center gap-3 my-4">
          <button class="btn btn-outline-secondary qty-btn" onclick="changeQty(-1)">–</button>
          <input type="number" id="modalQty" value="1" min="1" class="form-control qty-input">
          <button class="btn btn-outline-secondary qty-btn" onclick="changeQty(1)">+</button>
        </div>
        <button id="modalAddBtn" class="btn btn-primary btn-lg px-5">Add to Cart</button>
      </div>
    </div>
  </div>
</div>

<!-- Products -->
<section id="products" class="py-5 bg-white">
  <div class="container">
    <h2 class="text-center mb-5 display-5">Our Products</h2>
    <div class="row g-5" id="product-list"></div>
  </div>
</section>

<footer class="py-5 text-center bg-dark text-white">
  <div class="container"><p class="mb-0">© 2025 LuminaWeight ® • Premium Weight Loss Peptides</p></div>
</footer>

<script>
// EDIT STOCK HERE
const products = [
  {img:"10mg Tirz Vial.png", name:"Tirzepatide 10mg", price:70, stock:15},
  {img:"20mg Tirz Vial.png", name:"Tirzepatide 20mg", price:90, stock:22},
  {img:"40mg Tirz Vial.png", name:"Tirzepatide 40mg", price:120, stock:8},
  {img:"60mg Tirz Vial.png", name:"Tirzepatide 60mg", price:150, stock:3},
  {img:"20mg Reta Vial.png", name:"Retatrutide 20mg", price:130, stock:19},
  {img:"40mg Reta Vial.png", name:"Retatrutide 40mg", price:150, stock:11},
  {img:"60mg Reta Vial.png", name:"Retatrutide 60mg", price:170, stock:5}
];

let cart = [];
let currentProduct = null;

function renderProducts() {
  document.getElementById('product-list').innerHTML = products.map((p, i) => `
    <div class="col-md-4">
      <div class="card product-card h-100 shadow ${p.stock===0?'out-of-stock':''}" onclick="${p.stock>0?'openModal('+i+')':''}">
        <img src="${p.img}" class="card-img-top p-4" style="height:380px; object-fit:contain;">
        <div class="card-body text-center d-flex flex-column">
          <h5>${p.name}</h5>
          <p class="price">£${p.price}</p>
          <p class="stock ${p.stock<=5?'text-danger':'text-success'}">${p.stock>0?`Only ${p.stock} left`:'<strong>Out of Stock</strong>'}</p>
          <button class="btn ${p.stock>0?'btn-primary':'btn-secondary'} mt-auto" ${p.stock===0?'disabled':''}
                  onclick="event.stopPropagation(); openModal(${i})">
            ${p.stock>0?'Add to Cart':'Sold Out'}
          </button>
        </div>
      </div>
    </div>
  `).join('');
}
renderProducts();

function changeQty(delta) {
  const input = document.getElementById('modalQty');
  let val = parseInt(input.value) || 1;
  val = Math.max(1, Math.min(val + delta, currentProduct.stock));
  input.value = val;
}

function openModal(i) {
  currentProduct = products[i];
  if (currentProduct.stock === 0) return;
  document.getElementById('modalImg').src = currentProduct.img;
  document.getElementById('modalTitle').textContent = currentProduct.name;
  document.getElementById('modalName').textContent = currentProduct.name;
  document.getElementById('modalPrice').textContent = `£${currentProduct.price}`;
  document.getElementById('modalStock').innerHTML = `Only ${currentProduct.stock} left`;
  document.getElementById('modalQty').value = 1;

  document.getElementById('modalAddBtn').onclick = () => {
    const qty = parseInt(document.getElementById('modalQty').value) || 1;
    addToCart(currentProduct, qty);
    bootstrap.Modal.getInstance(document.getElementById('productModal')).hide();
  };
  new bootstrap.Modal(document.getElementById('productModal')).show();
}

function addToCart(product, qty) {
  const existing = cart.find(item => item.name === product.name);
  if (existing) existing.qty += qty;
  else cart.push({name: product.name, price: product.price, qty});
  product.stock -= qty;
  renderProducts();
  updateCart();
  toggleCart(true);
}

function updateQty(i, delta) {
  cart[i].qty = Math.max(1, cart[i].qty + delta);
  if (cart[i].qty === 0) cart.splice(i, 1);
  updateCart();
}

function removeFromCart(i) { cart.splice(i, 1); updateCart(); }

function updateCart() {
  const totalItems = cart.reduce((s,i)=>s+i.qty,0);
  const total = cart.reduce((s,i)=>s+i.price*i.qty,0);
  document.getElementById('cart-count').textContent = totalItems;
  document.getElementById('cart-items-count').textContent = totalItems;
  document.getElementById('cart-total').textContent = `£${total.toFixed(2)}`;
  document.getElementById('cart-items').innerHTML = cart.length === 0
    ? '<p class="text-center text-muted">Your cart is empty</p>'
    : cart.map((item,i) => `
      <div class="d-flex align-items-center mb-3 pb-3 border-bottom">
        <div class="flex-grow-1"><strong>${item.name}</strong><br><small>£${item.price} × ${item.qty}</small></div>
        <div class="d-flex gap-2">
          <button class="btn btn-outline-secondary btn-sm" onclick="updateQty(${i},-1)">–</button>
          <span class="fw-bold">${item.qty}</span>
          <button class="btn btn-outline-secondary btn-sm" onclick="updateQty(${i},1)">+</button>
          <button class="btn btn-sm btn-danger ms-2" onclick="removeFromCart(${i})">×</button>
        </div>
      </div>`).join('');
}

function toggleCart(force) {
  const sb = document.getElementById('cart-sidebar');
  const ov = document.querySelector('.overlay');
  const open = force !== undefined ? force : !sb.classList.contains('open');
  sb.classList.toggle('open', open);
  ov.classList.toggle('show', open);
}

// Go to checkout – works 100% with file://
function goToCheckout() {
  if (cart.length === 0) return alert('Your cart is empty!');
  const cartData = encodeURIComponent(JSON.stringify(cart));
  window.location.href = `checkout.html?cart=${cartData}`;
}
</script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
